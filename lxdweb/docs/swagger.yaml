basePath: /
definitions:
  models.CreateIPv6Request:
    properties:
      container_hostname:
        type: string
      description:
        type: string
      node_id:
        type: integer
    required:
    - container_hostname
    - node_id
    type: object
  models.CreateNATRequest:
    properties:
      container_hostname:
        type: string
      description:
        type: string
      external_port:
        type: integer
      internal_port:
        type: integer
      node_id:
        type: integer
      protocol:
        enum:
        - tcp
        - udp
        type: string
    required:
    - container_hostname
    - external_port
    - internal_port
    - node_id
    - protocol
    type: object
  models.CreateNodeRequest:
    properties:
      address:
        type: string
      api_key:
        type: string
      batch_interval:
        type: integer
      batch_size:
        type: integer
      description:
        type: string
      name:
        type: string
      sync_preset:
        type: string
    required:
    - address
    - name
    type: object
  models.CreateProxyRequest:
    properties:
      container_hostname:
        type: string
      container_port:
        type: integer
      description:
        type: string
      domain:
        type: string
      node_id:
        type: integer
      ssl_cert:
        type: string
      ssl_enabled:
        type: boolean
      ssl_key:
        type: string
      ssl_type:
        type: string
    required:
    - container_hostname
    - container_port
    - domain
    - node_id
    type: object
  models.UpdateNATRequest:
    properties:
      description:
        type: string
      external_port:
        type: integer
      internal_port:
        type: integer
      protocol:
        enum:
        - tcp
        - udp
        type: string
      status:
        enum:
        - active
        - inactive
        type: string
    type: object
  models.UpdateNodeRequest:
    properties:
      address:
        type: string
      api_key:
        type: string
      batch_interval:
        type: integer
      batch_size:
        type: integer
      description:
        type: string
      name:
        type: string
      sync_preset:
        type: string
    type: object
host: localhost:3000
info:
  contact:
    email: mastalee928@example.com
    name: mastalee928
    url: https://github.com/mastalee928/zjmf-lxd-server
  description: 基于 Session 的认证
  license:
    name: MIT
    url: https://github.com/mastalee928/zjmf-lxd-server/blob/main/LICENSE
  termsOfService: https://github.com/mastalee928/zjmf-lxd-server
  title: LXD Web 管理平台
  version: 1.0.3
paths:
  /:
    get:
      description: 显示系统仪表盘页面
      produces:
      - text/html
      responses:
        "200":
          description: HTML页面
          schema:
            type: string
      summary: 仪表盘页面
      tags:
      - 仪表盘
  /api/auto-sync/disable:
    post:
      description: 禁用自动同步服务，停止定时同步
      produces:
      - application/json
      responses:
        "200":
          description: 禁用成功
          schema:
            additionalProperties: true
            type: object
      summary: 禁用自动同步
      tags:
      - 系统管理
  /api/auto-sync/enable:
    post:
      description: 启用自动同步服务，每5分钟自动同步所有节点数据
      produces:
      - application/json
      responses:
        "200":
          description: 启用成功
          schema:
            additionalProperties: true
            type: object
      summary: 启用自动同步
      tags:
      - 系统管理
  /api/auto-sync/status:
    get:
      description: 查询自动同步服务的启用状态
      produces:
      - application/json
      responses:
        "200":
          description: 返回自动同步状态
          schema:
            additionalProperties: true
            type: object
      summary: 获取自动同步状态
      tags:
      - 系统管理
  /api/captcha:
    get:
      description: 生成登录验证码图片
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回验证码
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 生成失败
          schema:
            additionalProperties: true
            type: object
      summary: 获取验证码
      tags:
      - 认证管理
  /api/console/create-token:
    post:
      consumes:
      - application/json
      description: 为指定容器创建Web控制台访问令牌
      parameters:
      - description: 容器信息(hostname, node_id)
        in: body
        name: body
        required: true
        schema:
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回令牌和控制台URL
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数错误
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 节点不存在
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 创建失败
          schema:
            additionalProperties: true
            type: object
      summary: 创建控制台令牌
      tags:
      - 容器管理
  /api/containers:
    get:
      description: 从本地数据库获取所有容器缓存信息
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回容器列表
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未登录
          schema:
            additionalProperties: true
            type: object
      summary: 获取容器列表
      tags:
      - 容器管理
  /api/containers/{name}:
    get:
      description: 获取指定容器的详细信息
      parameters:
      - description: 容器名称
        in: path
        name: name
        required: true
        type: string
      - description: 节点ID
        in: query
        name: node_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回容器详情
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 节点或容器不存在
          schema:
            additionalProperties: true
            type: object
      summary: 获取容器详细信息
      tags:
      - 容器管理
  /api/containers/{name}/delete:
    post:
      description: 删除指定的容器并清理数据库缓存
      parameters:
      - description: 容器名称
        in: path
        name: name
        required: true
        type: string
      - description: 节点ID
        in: query
        name: node_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 删除成功
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 节点不存在
          schema:
            additionalProperties: true
            type: object
      summary: 删除容器
      tags:
      - 容器管理
  /api/containers/{name}/password:
    post:
      consumes:
      - application/json
      description: 重置指定容器的root密码
      parameters:
      - description: 容器名称
        in: path
        name: name
        required: true
        type: string
      - description: 密码参数
        in: body
        name: body
        required: true
        schema:
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: 重置成功
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数错误
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 节点不存在
          schema:
            additionalProperties: true
            type: object
      summary: 重置容器密码
      tags:
      - 容器管理
  /api/containers/{name}/refresh:
    post:
      description: 实时获取指定容器的最新信息并更新缓存
      parameters:
      - description: 容器名称
        in: path
        name: name
        required: true
        type: string
      - description: 节点ID
        in: query
        name: node_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 刷新成功
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 节点不存在
          schema:
            additionalProperties: true
            type: object
      summary: 刷新单个容器信息
      tags:
      - 容器管理
  /api/containers/{name}/reinstall:
    post:
      consumes:
      - application/json
      description: 重装指定容器的操作系统
      parameters:
      - description: 容器名称
        in: path
        name: name
        required: true
        type: string
      - description: 重装参数
        in: body
        name: body
        required: true
        schema:
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: 重装成功
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数错误
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 节点不存在
          schema:
            additionalProperties: true
            type: object
      summary: 重装容器系统
      tags:
      - 容器管理
  /api/containers/{name}/restart:
    post:
      description: 重启指定的容器
      parameters:
      - description: 容器名称
        in: path
        name: name
        required: true
        type: string
      - description: 节点ID
        in: query
        name: node_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 重启成功
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 节点不存在
          schema:
            additionalProperties: true
            type: object
      summary: 重启容器
      tags:
      - 容器管理
  /api/containers/{name}/start:
    post:
      description: 启动指定的容器
      parameters:
      - description: 容器名称
        in: path
        name: name
        required: true
        type: string
      - description: 节点ID
        in: query
        name: node_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 启动成功
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 节点不存在
          schema:
            additionalProperties: true
            type: object
      summary: 启动容器
      tags:
      - 容器管理
  /api/containers/{name}/stop:
    post:
      description: 停止指定的容器
      parameters:
      - description: 容器名称
        in: path
        name: name
        required: true
        type: string
      - description: 节点ID
        in: query
        name: node_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 停止成功
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 节点不存在
          schema:
            additionalProperties: true
            type: object
      summary: 停止容器
      tags:
      - 容器管理
  /api/containers/{name}/suspend:
    post:
      description: 暂停指定的容器（Frozen状态）
      parameters:
      - description: 容器名称
        in: path
        name: name
        required: true
        type: string
      - description: 节点ID
        in: query
        name: node_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 暂停成功
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 节点不存在
          schema:
            additionalProperties: true
            type: object
      summary: 暂停容器
      tags:
      - 容器管理
  /api/containers/{name}/traffic/reset:
    post:
      description: 重置指定容器的流量统计
      parameters:
      - description: 容器名称
        in: path
        name: name
        required: true
        type: string
      - description: 节点ID
        in: query
        name: node_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 重置成功
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 节点不存在
          schema:
            additionalProperties: true
            type: object
      summary: 重置容器流量
      tags:
      - 容器管理
  /api/containers/{name}/unsuspend:
    post:
      description: 恢复被暂停的容器
      parameters:
      - description: 容器名称
        in: path
        name: name
        required: true
        type: string
      - description: 节点ID
        in: query
        name: node_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 恢复成功
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 节点不存在
          schema:
            additionalProperties: true
            type: object
      summary: 恢复容器
      tags:
      - 容器管理
  /api/containers/cache:
    get:
      description: 从本地数据库缓存获取容器列表，支持按node_id筛选
      parameters:
      - description: 节点ID
        in: query
        name: node_id
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回容器列表
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未登录
          schema:
            additionalProperties: true
            type: object
      summary: 从本地数据库缓存获取容器列表
      tags:
      - 容器管理
  /api/containers/create:
    post:
      consumes:
      - application/json
      description: 在指定节点创建新的LXD容器
      parameters:
      - description: 容器配置参数
        in: body
        name: body
        required: true
        schema:
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: 创建成功
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数错误
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 节点不存在
          schema:
            additionalProperties: true
            type: object
      summary: 创建容器
      tags:
      - 容器管理
  /api/ipv6:
    get:
      description: 查询所有IPv6绑定信息，支持按节点过滤
      parameters:
      - description: 节点ID
        in: query
        name: node_id
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回IPv6绑定列表
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 查询失败
          schema:
            additionalProperties: true
            type: object
      summary: 获取IPv6绑定列表
      tags:
      - IPv6管理
    post:
      consumes:
      - application/json
      description: 为指定容器创建新的IPv6地址绑定
      parameters:
      - description: IPv6绑定参数
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/models.CreateIPv6Request'
      produces:
      - application/json
      responses:
        "200":
          description: 创建成功
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数错误
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 节点不存在
          schema:
            additionalProperties: true
            type: object
      summary: 创建IPv6绑定
      tags:
      - IPv6管理
  /api/ipv6-sync/all:
    post:
      description: 启动所有活跃节点的IPv6绑定同步任务
      produces:
      - application/json
      responses:
        "200":
          description: 同步任务已启动
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未登录
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 查询失败
          schema:
            additionalProperties: true
            type: object
      summary: 同步所有节点的IPv6绑定
      tags:
      - IPv6管理
  /api/ipv6-sync/status:
    get:
      description: 查询指定节点或所有节点的IPv6绑定同步状态
      parameters:
      - description: 节点ID
        in: query
        name: node_id
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回同步状态
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未登录
          schema:
            additionalProperties: true
            type: object
      summary: 获取IPv6同步状态
      tags:
      - IPv6管理
  /api/ipv6/{id}:
    delete:
      description: 删除指定的IPv6地址绑定并清理数据库
      parameters:
      - description: 绑定ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 删除成功
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 绑定或节点不存在
          schema:
            additionalProperties: true
            type: object
      summary: 删除IPv6绑定
      tags:
      - IPv6管理
  /api/ipv6/cache:
    get:
      description: 直接从本地缓存数据库读取IPv6绑定信息
      parameters:
      - description: 节点ID
        in: query
        name: node_id
        type: string
      - description: 容器名称
        in: query
        name: hostname
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回缓存数据
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 查询失败
          schema:
            additionalProperties: true
            type: object
      summary: 从缓存获取IPv6绑定
      tags:
      - IPv6管理
  /api/ipv6/sync:
    post:
      description: 从lxdapi同步指定节点的IPv6绑定信息
      parameters:
      - description: 节点ID
        in: query
        name: node_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 同步任务已启动
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 缺少参数
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 节点不存在
          schema:
            additionalProperties: true
            type: object
      summary: 同步IPv6绑定
      tags:
      - IPv6管理
  /api/ipv6/tasks:
    get:
      description: 查询最近50条IPv6同步任务记录
      parameters:
      - description: 节点ID
        in: query
        name: node_id
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回任务列表
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 查询失败
          schema:
            additionalProperties: true
            type: object
      summary: 获取IPv6同步任务列表
      tags:
      - IPv6管理
  /api/login:
    post:
      consumes:
      - application/json
      description: 验证用户名、密码和验证码，登录成功后创建会话
      parameters:
      - description: 登录参数(username, password, captcha)
        in: body
        name: body
        required: true
        schema:
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: 登录成功
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数错误或验证码错误
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 用户名或密码错误
          schema:
            additionalProperties: true
            type: object
      summary: 用户登录
      tags:
      - 认证管理
  /api/logout:
    post:
      description: 清除用户会话，退出登录
      produces:
      - application/json
      responses:
        "200":
          description: 退出成功
          schema:
            additionalProperties: true
            type: object
      summary: 用户登出
      tags:
      - 认证管理
  /api/nat:
    get:
      description: 查询所有NAT端口转发规则，支持按节点过滤
      parameters:
      - description: 节点ID
        in: query
        name: node_id
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回NAT规则列表
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 查询失败
          schema:
            additionalProperties: true
            type: object
      summary: 获取NAT规则列表
      tags:
      - NAT管理
    post:
      consumes:
      - application/json
      description: 创建新的NAT端口转发规则
      parameters:
      - description: NAT规则参数
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/models.CreateNATRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 创建成功
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数错误
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 节点不存在
          schema:
            additionalProperties: true
            type: object
        "409":
          description: 端口已被占用
          schema:
            additionalProperties: true
            type: object
      summary: 创建NAT规则
      tags:
      - NAT管理
  /api/nat-sync/all:
    post:
      description: 启动所有活跃节点的NAT规则同步任务
      produces:
      - application/json
      responses:
        "200":
          description: 同步任务已启动
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未登录
          schema:
            additionalProperties: true
            type: object
      summary: 同步所有节点的NAT规则
      tags:
      - NAT管理
  /api/nat-sync/node/{id}:
    post:
      description: 启动指定节点的NAT规则同步任务
      parameters:
      - description: 节点ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 同步任务已启动
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 节点ID格式错误或节点正在同步
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未登录
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 节点不存在
          schema:
            additionalProperties: true
            type: object
      summary: 同步指定节点的NAT规则
      tags:
      - NAT管理
  /api/nat-sync/status:
    get:
      description: 查询指定节点或所有节点的NAT规则同步状态
      parameters:
      - description: 节点ID
        in: query
        name: node_id
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回同步状态
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未登录
          schema:
            additionalProperties: true
            type: object
      summary: 获取NAT同步状态
      tags:
      - NAT管理
  /api/nat-sync/tasks:
    get:
      description: 查询最近50条NAT规则同步任务记录
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回任务列表
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未登录
          schema:
            additionalProperties: true
            type: object
      summary: 获取NAT同步任务列表
      tags:
      - NAT管理
  /api/nat/{id}:
    delete:
      description: 删除指定的NAT端口转发规则并清理数据库
      parameters:
      - description: 规则ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 删除成功
          schema:
            additionalProperties: true
            type: object
        "404":
          description: NAT规则或节点不存在
          schema:
            additionalProperties: true
            type: object
      summary: 删除NAT规则
      tags:
      - NAT管理
    get:
      description: 根据ID获取NAT规则详情
      parameters:
      - description: 规则ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回NAT规则
          schema:
            additionalProperties: true
            type: object
        "404":
          description: NAT规则不存在
          schema:
            additionalProperties: true
            type: object
      summary: 获取单个NAT规则
      tags:
      - NAT管理
    put:
      consumes:
      - application/json
      description: 更新NAT规则的描述或状态
      parameters:
      - description: 规则ID
        in: path
        name: id
        required: true
        type: string
      - description: 更新参数
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/models.UpdateNATRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 更新成功
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数错误
          schema:
            additionalProperties: true
            type: object
        "404":
          description: NAT规则不存在
          schema:
            additionalProperties: true
            type: object
      summary: 更新NAT规则
      tags:
      - NAT管理
  /api/nat/cache:
    get:
      description: 直接从本地缓存数据库读取NAT规则信息
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回缓存数据
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未登录
          schema:
            additionalProperties: true
            type: object
      summary: 从缓存获取NAT规则列表
      tags:
      - NAT管理
  /api/nat/check:
    get:
      description: 检查指定端口和协议是否可用于NAT转发
      parameters:
      - description: 节点ID
        in: query
        name: node_id
        required: true
        type: string
      - description: 容器名称
        in: query
        name: hostname
        required: true
        type: string
      - description: 协议类型(tcp/udp)
        in: query
        name: protocol
        required: true
        type: string
      - description: 端口号
        in: query
        name: port
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 检查结果
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数错误
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 节点不存在
          schema:
            additionalProperties: true
            type: object
      summary: 检查NAT端口是否可用
      tags:
      - NAT管理
  /api/nat/sync:
    post:
      description: 同步指定节点的NAT规则信息
      parameters:
      - description: 节点ID
        in: query
        name: node_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 同步任务已启动
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 缺少参数
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 节点不存在
          schema:
            additionalProperties: true
            type: object
      summary: 同步NAT规则
      tags:
      - NAT管理
  /api/nodes:
    get:
      description: 查询所有LXD节点及其系统信息，支持按状态过滤
      parameters:
      - description: 节点状态(active/inactive)
        in: query
        name: status
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回节点列表
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 查询失败
          schema:
            additionalProperties: true
            type: object
      summary: 获取节点列表
      tags:
      - 节点管理
    post:
      consumes:
      - application/json
      description: 添加新的LXD节点到管理系统
      parameters:
      - description: 节点配置参数
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/models.CreateNodeRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 创建成功
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数错误
          schema:
            additionalProperties: true
            type: object
      summary: 创建节点
      tags:
      - 节点管理
  /api/nodes/{id}:
    delete:
      description: 从管理系统中删除指定节点及其所有关联数据
      parameters:
      - description: 节点ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 删除成功
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 删除失败
          schema:
            additionalProperties: true
            type: object
      summary: 删除节点
      tags:
      - 节点管理
    get:
      description: 根据ID获取节点详情
      parameters:
      - description: 节点ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回节点信息
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 节点不存在
          schema:
            additionalProperties: true
            type: object
      summary: 获取单个节点
      tags:
      - 节点管理
    put:
      consumes:
      - application/json
      description: 更新节点配置信息
      parameters:
      - description: 节点ID
        in: path
        name: id
        required: true
        type: string
      - description: 更新参数
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/models.UpdateNodeRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 更新成功
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数错误
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 节点不存在
          schema:
            additionalProperties: true
            type: object
      summary: 更新节点
      tags:
      - 节点管理
  /api/nodes/{id}/refresh:
    post:
      description: 刷新指定节点的系统信息缓存
      parameters:
      - description: 节点ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 刷新成功
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 节点不存在
          schema:
            additionalProperties: true
            type: object
      summary: 刷新节点缓存
      tags:
      - 节点管理
  /api/nodes/{id}/test:
    post:
      description: 测试与LXD节点的连接状态
      parameters:
      - description: 节点ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 测试成功
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 节点不存在
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 连接失败
          schema:
            additionalProperties: true
            type: object
      summary: 测试节点连接
      tags:
      - 节点管理
  /api/proxy-configs:
    get:
      description: 查询所有反向代理配置信息，支持按节点过滤
      parameters:
      - description: 节点ID
        in: query
        name: node_id
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回配置列表
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 查询失败
          schema:
            additionalProperties: true
            type: object
      summary: 获取反向代理配置列表
      tags:
      - 反向代理管理
    post:
      consumes:
      - application/json
      description: 为指定容器创建新的反向代理配置
      parameters:
      - description: 反向代理配置参数
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/models.CreateProxyRequest'
      produces:
      - application/json
      responses:
        "200":
          description: 创建成功
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数错误
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 节点不存在
          schema:
            additionalProperties: true
            type: object
      summary: 创建反向代理配置
      tags:
      - 反向代理管理
  /api/proxy-configs/{id}:
    delete:
      description: 删除指定的反向代理配置并清理数据库
      parameters:
      - description: 配置ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 删除成功
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 配置或节点不存在
          schema:
            additionalProperties: true
            type: object
      summary: 删除反向代理配置
      tags:
      - 反向代理管理
  /api/proxy-configs/cache:
    get:
      description: 直接从本地缓存数据库读取反向代理配置信息
      parameters:
      - description: 节点ID
        in: query
        name: node_id
        type: string
      - description: 容器名称
        in: query
        name: hostname
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回缓存数据
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 查询失败
          schema:
            additionalProperties: true
            type: object
      summary: 从缓存获取反向代理配置
      tags:
      - 反向代理管理
  /api/proxy-configs/sync:
    post:
      description: 从lxdapi同步指定节点的反向代理配置
      parameters:
      - description: 节点ID
        in: query
        name: node_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 同步任务已启动
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 缺少参数
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 节点不存在
          schema:
            additionalProperties: true
            type: object
      summary: 同步反向代理配置
      tags:
      - 反向代理管理
  /api/proxy-configs/tasks:
    get:
      description: 查询最近50条反向代理同步任务记录
      parameters:
      - description: 节点ID
        in: query
        name: node_id
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回任务列表
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 查询失败
          schema:
            additionalProperties: true
            type: object
      summary: 获取反向代理同步任务列表
      tags:
      - 反向代理管理
  /api/proxy-sync/all:
    post:
      description: 启动所有活跃节点的反向代理配置同步任务
      produces:
      - application/json
      responses:
        "200":
          description: 同步任务已启动
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未登录
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 查询失败
          schema:
            additionalProperties: true
            type: object
      summary: 同步所有节点的反向代理配置
      tags:
      - 反向代理管理
  /api/proxy-sync/status:
    get:
      description: 查询指定节点或所有节点的反向代理配置同步状态
      parameters:
      - description: 节点ID
        in: query
        name: node_id
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回同步状态
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未登录
          schema:
            additionalProperties: true
            type: object
      summary: 获取反向代理同步状态
      tags:
      - 反向代理管理
  /api/proxy/check:
    get:
      description: 检查指定域名是否可用于反向代理配置
      parameters:
      - description: 节点ID
        in: query
        name: node_id
        required: true
        type: string
      - description: 域名
        in: query
        name: domain
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 检查结果
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 参数错误
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 节点不存在
          schema:
            additionalProperties: true
            type: object
      summary: 检查反向代理域名是否可用
      tags:
      - 反向代理管理
  /api/sync/all:
    post:
      description: 启动所有活跃节点的容器信息同步任务
      produces:
      - application/json
      responses:
        "200":
          description: 同步任务已启动
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未登录
          schema:
            additionalProperties: true
            type: object
        "500":
          description: 查询失败
          schema:
            additionalProperties: true
            type: object
      summary: 同步所有节点的容器信息
      tags:
      - 容器同步
  /api/sync/node/{id}:
    post:
      description: 启动指定节点的容器信息同步任务
      parameters:
      - description: 节点ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 同步任务已启动
          schema:
            additionalProperties: true
            type: object
        "400":
          description: 节点ID格式错误
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未登录
          schema:
            additionalProperties: true
            type: object
        "404":
          description: 节点不存在
          schema:
            additionalProperties: true
            type: object
      summary: 同步指定节点的容器信息
      tags:
      - 容器同步
  /api/sync/status:
    get:
      description: 查询指定节点或所有节点的容器同步状态
      parameters:
      - description: 节点ID
        in: query
        name: node_id
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回同步状态
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未登录
          schema:
            additionalProperties: true
            type: object
      summary: 获取容器同步状态
      tags:
      - 容器同步
  /api/sync/tasks:
    get:
      description: 查询最近50条容器同步任务记录
      produces:
      - application/json
      responses:
        "200":
          description: 成功返回任务列表
          schema:
            additionalProperties: true
            type: object
        "401":
          description: 未登录
          schema:
            additionalProperties: true
            type: object
      summary: 获取容器同步任务列表
      tags:
      - 容器同步
  /containers:
    get:
      description: 显示容器管理页面
      produces:
      - text/html
      responses:
        "200":
          description: HTML页面
          schema:
            type: string
      summary: 容器管理页面
      tags:
      - 容器管理
  /ipv6:
    get:
      description: 显示IPv6绑定管理页面
      produces:
      - text/html
      responses:
        "200":
          description: HTML页面
          schema:
            type: string
      summary: IPv6管理页面
      tags:
      - IPv6管理
  /login:
    get:
      description: 显示登录页面
      produces:
      - text/html
      responses:
        "200":
          description: HTML页面
          schema:
            type: string
      summary: 登录页面
      tags:
      - 认证管理
  /nat:
    get:
      description: 显示NAT端口转发规则管理页面
      produces:
      - text/html
      responses:
        "200":
          description: HTML页面
          schema:
            type: string
      summary: NAT规则管理页面
      tags:
      - NAT管理
  /nodes:
    get:
      description: 显示节点管理页面
      produces:
      - text/html
      responses:
        "200":
          description: HTML页面
          schema:
            type: string
      summary: 节点管理页面
      tags:
      - 节点管理
  /nodes/{id}:
    get:
      description: 显示单个节点的详细信息和管理界面
      parameters:
      - description: 节点ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - text/html
      responses:
        "200":
          description: HTML页面
          schema:
            type: string
      summary: 节点详情页面
      tags:
      - 节点管理
  /proxy:
    get:
      description: 显示反向代理配置管理页面
      produces:
      - text/html
      responses:
        "200":
          description: HTML页面
          schema:
            type: string
      summary: 反向代理管理页面
      tags:
      - 反向代理管理
securityDefinitions:
  BasicAuth:
    type: basic
swagger: "2.0"
